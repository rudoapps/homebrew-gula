import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import '../../../../core/config/di/locator.dart';
import '../../../../core/services/navigation/source/navigation_service.dart';
import '../../../domain/use_cases/{{PARAM_NAME}}/{{PARAM_NAME}}_use_case.dart';
import 'bloc/{{PARAM_NAME}}_bloc.dart';
import 'bloc/{{PARAM_NAME}}_event.dart';
import 'bloc/{{PARAM_NAME}}_state.dart';

class {{TEMPLATE_NAME}}Page extends StatelessWidget {
  const {{TEMPLATE_NAME}}Page({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocProvider(
      create: (context) => {{TEMPLATE_NAME}}Bloc(
        {{PARAM_NAME}}UseCase: locator.get<{{TEMPLATE_NAME}}UseCase>(),
        navigationService: locator.get<NavigationService>(),
      )..add({{TEMPLATE_NAME}}Started()),
      child: const {{TEMPLATE_NAME}}View(),
    );
  }
}

class {{TEMPLATE_NAME}}View extends StatelessWidget {
  const {{TEMPLATE_NAME}}View({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('{{TEMPLATE_NAME}}'),
      ),
      body: BlocBuilder<{{TEMPLATE_NAME}}Bloc, {{TEMPLATE_NAME}}State>(
        builder: (context, state) {
          return switch (state) {
            {{TEMPLATE_NAME}}Initial() => const Center(
                child: Text('Initial state'),
              ),
            {{TEMPLATE_NAME}}Loading() => const Center(
                child: CircularProgressIndicator(),
              ),
            {{TEMPLATE_NAME}}Success() => Center(
                child: Column(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    Text('ID: \${state.data.id}'),
                    Text('Name: \${state.data.name}'),
                  ],
                ),
              ),
            {{TEMPLATE_NAME}}Failure() => Center(
                child: Column(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    const Icon(Icons.error, color: Colors.red, size: 48),
                    const SizedBox(height: 16),
                    Text(
                      'Error: \${state.error.message}',
                      textAlign: TextAlign.center,
                      style: const TextStyle(color: Colors.red),
                    ),
                  ],
                ),
              ),
          };
        },
      ),
    );
  }
}
