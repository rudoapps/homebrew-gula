#!/bin/sh
#
# Pre-commit hook para validar archivos .gula
#
# Para instalar este hook:
# 1. Copia este archivo a .git/hooks/pre-commit
# 2. Dale permisos de ejecuci√≥n: chmod +x .git/hooks/pre-commit
#
# Alternativamente, usa: gula install-hook
# O si usas un gestor de hooks como husky o pre-commit,
# puedes configurarlo para ejecutar: gula validate --staged
#

echo "üîç Validando archivos .gula..."
echo ""

# Verificar si gula est√° disponible
if ! command -v gula >/dev/null 2>&1; then
    echo "‚ö†Ô∏è  Advertencia: gula no est√° instalado o no est√° en el PATH"
    echo "Saltando validaci√≥n de archivos .gula"
    exit 0
fi

# Ejecutar validaci√≥n de archivos en staging
gula validate --staged

# Capturar el c√≥digo de salida
validation_result=$?

if [ $validation_result -ne 0 ]; then
    echo ""
    echo "‚ùå Pre-commit hook fall√≥: Hay errores en los archivos .gula"
    echo "Por favor corrige los errores antes de hacer commit"
    exit 1
fi

echo ""
echo "‚úÖ Validaci√≥n de archivos .gula completada"
exit 0
